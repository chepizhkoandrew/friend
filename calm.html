<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Choose Activity - Tailtrail</title>
  <link rel="stylesheet" href="calm.css">
</head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2XWXK4VJX4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-2XWXK4VJX4');
</script>


<script>
// Define the userChoices object globally
const userChoices = { where: "", what: "" };


// Fetch GPT response
const gptcallclient = async () => {
  const exerciseoneprompt = `If you were a dog psychologist loving Bill Murray and Monty Python and being the smartest person in the dog world, what advice would you give to a stranger who is now at ${userChoices.where} feeling ${userChoices.what} inside? The advice should be creative, sarcastic, sexy, rough, and bohemian but very smart and funny. Make it sound like it's from the dog's perspective.`;
  console.log(`Sending GPT request with choices: ${userChoices.where}, ${userChoices.what}`);
  try {
    const response = await fetch('https://tailtrail.club:10000/api/gpt', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ exerciseoneprompt })
    });
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    const data = await response.json();
    if (data.text) {
      return data.text.trim();
    } else {
      console.error("Invalid response format: text is missing");
      return "Sorry, wisdom is unavailable.";
    }
  } catch (error) {
    console.error("Error fetching dog wisdom:", error);
    return "Sorry, wisdom is unavailable.";
  }
};

</script>



  <div class="container">
    <div class="background"></div>
    <div class="frame">
      <div class="question">
        <span class="word1">WHAT IS</span>
        <br>
        <span class="word2">AROUND</span>
        <br>
        <span class="word3">YOU?</span>
      </div>

      <div class="activity-grid">
        <div class="activity-item">HOME</div>
        <div class="activity-item">STREET</div>
        <div class="activity-item">LOVE</div>
        <div class="activity-item">WORK</div>
        <div class="activity-item">MOVE</div>
        <div class="activity-item">BAR</div>
      </div>

      <div class="question second-question" style="display: none;">
        <span class="word1">WHAT IS</span>
        <br>
        <span class="word2">INSIDE</span>
        <br>
        <span class="word3">YOU?</span>
      </div>

      <div class="activity-grid second-grid" style="display: none;">
        <div class="activity-item">FEAR</div>
        <div class="activity-item">JOY</div>
        <div class="activity-item">SAD</div>
        <div class="activity-item">HUNGER</div>
        <div class="activity-item">DESIRE</div>
        <div class="activity-item">LOVE</div>
      </div>


      <div class="new-gpt-screen" style="display: none;">
        <div class="gpt-response">
          <p><span id="dog-wisdom"></span></p>
        </div>
      </div>
      
      

      <div class="fourth-question" style="display: none;">
        <p><span id="dog-wisdom"></span></p>
      </div>

      <div class="question third-question" style="display: none;">
        <span class="word1">DOG WILL</span>
        <br>
        <span class="word2">HELP</span>
      </div>
      <div class="activity-grid third-grid" style="display: none;">
        <div class="activity-item"><a href="/calm">START AGAIN</a></div>
        <div class="activity-item"><a href="https://www.patreon.com/MadridTheDog" target="_blank">DONATE</a></div>
        <div class="activity-item"><a href="#" onclick="gptcallclient()">GPT TEST</a></div>
        
      
      
        <div class="activity-item"><a href="https://www.instagram.com/madrid_the_dog/" target="_blank">INSTAGRAM</a></div>
      </div>

      <div class="video-screen" style="display: none;">
        <video id="background-video" autoplay muted loop>
          <source src="/images/e2fdfe7cd156473f89afcc230284ac4b.mp4" type="video/mp4">
        </video>
        <div class="next-button-container">
          <button id="next-button" style="display: none;">Next</button>
        </div>
      </div>
      
    </div>
  </div>
  <script type="module" src="calm.js"></script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/openai/dist/index.js"></script>

</body>
</html>
